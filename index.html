<!DOCTYPE html>
<html lang="si">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>XRP Live Transaction Log (සජීවී ගනුදෙනු ලොගය)</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    
    <style>
        /* --- CSS Styles --- */
        :root {
            --primary-color: #007bff; /* නිල් (Header) */
            --accent-color: #28a745; /* කොළ (Received) */
            --error-color: #dc3545; /* රතු (Sent) */
            --secondary-color: #ffc107; /* කහ (Account Create) */
            --dex-color: #9c27b0; /* දම් (DEX) */
            --background-color: #f8f9fa;
            --card-background: #ffffff;
            --text-color: #343a40;
            --border-color: #dee2e6;
        }

        body {
            font-family: 'Arial', sans-serif;
            background-color: var(--background-color);
            color: var(--text-color);
            display: flex;
            justify-content: center;
            padding: 20px;
            margin: 0;
            min-height: 100vh;
        }

        .log-container {
            width: 100%;
            max-width: 500px;
            background-color: var(--card-background);
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .log-title {
            background-color: var(--primary-color);
            color: white;
            padding: 15px 20px;
            font-size: 1.25em;
            font-weight: bold;
            display: flex;
            align-items: center;
        }

        .log-title i {
            margin-right: 10px;
        }

        .log-entry {
            display: flex;
            align-items: center;
            padding: 15px 20px;
            border-bottom: 1px solid var(--border-color);
            transition: background-color 0.2s;
        }

        .log-entry:last-child {
            border-bottom: none;
        }

        .log-entry:hover {
            background-color: #f1f1f1;
        }

        .log-icon {
            min-width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
            font-size: 16px;
            margin-right: 15px;
        }

        .log-details {
            flex-grow: 1;
            overflow: hidden;
        }

        .log-main-line {
            font-weight: bold;
            color: var(--text-color);
        }

        .log-sub-line {
            font-size: 0.85em;
            color: #6c757d;
        }

        .log-amount {
            font-weight: bold;
            min-width: 90px;
            text-align: right;
            padding-left: 10px;
        }

        .log-amount.received {
            color: var(--accent-color);
        }

        .log-amount.sent {
            color: var(--error-color);
        }
    </style>
</head>
<body>

    <div class="log-container">
        <div class="log-title"><i class="fas fa-chart-line"></i> LIVE XRP TRANSACTION LOG</div>
        
        </div>

    <script>
        /* --- JavaScript Logic --- */

        /**
         * නව Log Entry එකක් සඳහා HTML නිර්මාණය කරයි.
         */
        function createLogEntry(type, hash, timeAgo, amount = 0) {
            let iconHTML, mainText, amountClass, iconColor;

            switch (type) {
                case 'PaymentSent':
                    iconHTML = '<i class="fas fa-arrow-up"></i>';
                    mainText = 'XRP Sent (ගෙවීම යවන ලදි)';
                    amountClass = 'sent';
                    amountText = amount > 0 ? `- ${amount.toFixed(2)} XRP` : '';
                    iconColor = 'var(--error-color)';
                    break;
                case 'PaymentReceived':
                    iconHTML = '<i class="fas fa-arrow-down"></i>';
                    mainText = 'XRP Received (ගෙවීම ලැබුණි)';
                    amountClass = 'received';
                    amountText = amount > 0 ? `+ ${amount.toFixed(2)} XRP` : '';
                    iconColor = 'var(--accent-color)';
                    break;
                case 'AccountCreate':
                    iconHTML = '<i class="fas fa-user-plus"></i>';
                    mainText = 'New Account Activation (නව ගිණුම සක්‍රීය කිරීම)';
                    amountClass = '';
                    amountText = '';
                    iconColor = 'var(--secondary-color)';
                    break;
                case 'OfferCreate':
                    iconHTML = '<i class="fas fa-exchange-alt"></i>';
                    mainText = 'DEX Offer Created (DEX ඔෆර් එකක් නිර්මාණය කළා)';
                    amountClass = 'sent';
                    amountText = amount > 0 ? `- ${amount.toFixed(2)} XRP` : '';
                    iconColor = 'var(--dex-color)';
                    break;
                default:
                    iconHTML = '<i class="fas fa-info"></i>';
                    mainText = 'Ledger Activity (ලෙජර් ක්‍රියාකාරකම්)';
                    amountClass = '';
                    amountText = '';
                    iconColor = '#607d8b'; // Default Grey/Blue
            }
            
            // Hash එක කෙටි කිරීම
            const shortHash = `${hash.substring(0, 4)}...${hash.substring(hash.length - 4)}`;

            const logHTML = `
                <div class="log-entry">
                    <div class="log-icon" style="background-color: ${iconColor};">${iconHTML}</div>
                    <div class="log-details">
                        <div class="log-main-line">${mainText}</div>
                        <div class="log-sub-line">Tx Hash: ${shortHash} | ${timeAgo}</div>
                    </div>
                    <div class="log-amount ${amountClass}">${amountText}</div>
                </div>
            `;
            return logHTML;
        }

        /**
         * XRP Log එක සඳහා දත්ත ලබාගෙන HTML තුළට එක් කරයි. (අනුකරණය)
         */
        function fetchLiveXRPLog() {
            
            // සජීවී දත්ත අනුකරණය
            const dummyTransactions = [
                { type: 'PaymentReceived', hash: 'f5471a2b3c4d5e6f7a8b9c0d1e2f3a4e321a', amount: 1500, time: '2 minutes ago' },
                { type: 'PaymentSent', hash: 'a9b3c6d2e4f6a8b1c3d5e7f9a1b2c4d6', amount: 25.43, time: '5 minutes ago' },
                { type: 'AccountCreate', hash: 'x7y8z9a0b1c2d3e4f5g6h7i8j9k0l1m2', amount: 0, time: '10 minutes ago' },
                { type: 'PaymentReceived', hash: 'b1c2d3e4f5g6h7i8j9k0l1m2n3o4p5q6', amount: 550.00, time: '30 minutes ago' },
                { type: 'OfferCreate', hash: '3e7f5a1b9c2d4e6f8a0b1c3d5e7f9a2b', amount: 1000, time: '1 hour ago' },
            ];
            
            const logContainer = document.querySelector('.log-container');
            
            // දැනට පවතින entries ඉවත් කිරීම (log-title එක ඉතිරි වේ)
            const currentEntries = logContainer.querySelectorAll('.log-entry');
            currentEntries.forEach(e => e.remove());

            // නව entries එක් කිරීම
            dummyTransactions.forEach(tx => {
                const entryHTML = createLogEntry(tx.type, tx.hash, tx.time, tx.amount);
                logContainer.insertAdjacentHTML('beforeend', entryHTML);
            });
        }


        // DOM එක සම්පූර්ණයෙන් පටවා ඇති විට Log ශ්‍රිතය අමතන්න
        document.addEventListener('DOMContentLoaded', () => {
            fetchLiveXRPLog(); 
            
            // සටහන: සජීවීව update වීමට අවශ්‍ය නම්, පහත පේළිය අදහස් දක්වනවාට වඩා ඉවත් කරන්න:
            // setInterval(fetchLiveXRPLog, 15000); 
        });
    </script>
</body>
</html>
